@page

@model FrotiX.Pages.Requisitante.IndexModel

@{
	ViewData["Title"] = "Requisitantes";
	ViewData["PageName"] = "requisitante_index";
	ViewData["Heading"] = "<i class='fa-duotone fa-user-tie'></i> Cadastros: <span class='fw-300'>Requisitantes</span>";
	ViewData["Category1"] = "Cadastros";
	ViewData["PageIcon"] = "fa-duotone fa-user-tie";
}

@section HeadBlock {
	<style>
		/* ======== OUTLINE BRANCO NO BOTÃO DO HEADER (Padrão FrotiX) ======== */
		.ftx-card-header .btn-fundo-laranja {
			outline: 2px solid rgba(255, 255, 255, 0.5) !important;
			outline-offset: 1px;
			transition: all 0.2s ease;
			position: relative;
			overflow: visible !important; /* Permite ripple externo */
		}

		.ftx-card-header .btn-fundo-laranja:hover {
			outline: 2px solid rgba(255, 255, 255, 0.8) !important;
			outline-offset: 2px;
		}
	</style>
}

<style>
	/* ===== BADGES DE STATUS - PADRÃO FROTIX ===== */
	.ftx-badge-status {
		display: inline-flex !important;
		align-items: center !important;
		justify-content: center !important;
		padding: .35rem .75rem !important;
		min-height: 1.65rem;
		min-width: 5.5rem;
		white-space: nowrap;
		font-size: .78rem !important;
		font-weight: 600 !important;
		line-height: 1 !important;
		border-radius: 9999px !important;
		color: #fff !important;
		text-transform: uppercase;
		letter-spacing: 0.3px;
		gap: 0.35rem;
		transition: all 0.2s ease;
		box-shadow: 0 2px 4px rgba(0,0,0,0.15) !important;
	}

	.ftx-badge-status:hover {
		transform: translateY(-1px);
		box-shadow: 0 4px 8px rgba(0,0,0,0.2) !important;
	}

	.ftx-badge-status i {
		font-size: 0.75rem;
	}

	/* Ícones duotone - destaque no elemento interno */
	.ftx-badge-status i.fa-duotone {
		--fa-primary-color: #fff;
		--fa-secondary-color: #fff;
		--fa-primary-opacity: 1;
		--fa-secondary-opacity: 0.3;
	}

	/* Ativo - Verde */
	.ftx-badge-ativo {
		background: linear-gradient(135deg, #198754 0%, #157347 100%);
	}

	/* Inativo - Cinza Escuro (baseado em btn-dark suavizado 20%) */
	.ftx-badge-inativo {
		background: linear-gradient(135deg, #525960 0%, #434a51 100%);
	}

	/* Badge clicável */
	.ftx-badge-status.ftx-badge-clickable {
		cursor: pointer;
	}

	.ftx-badge-status.ftx-badge-clickable:hover {
		filter: brightness(1.1);
		transform: translateY(-2px);
	}

	.ftx-badge-status.ftx-badge-clickable:active {
		transform: translateY(0);
	}

	/* ===== BOTÕES DE AÇÃO - PADRÃO FROTIX ===== */
	.btn-acao-ftx {
		width: 32px;
		height: 30px;
		padding: 0 !important;
		display: inline-flex;
		align-items: center;
		justify-content: center;
		border-radius: 0.375rem !important;
		font-size: 0.95rem;
		margin: 2px;
		border: none;
		color: #fff !important;
		transition: all 0.3s ease, transform 0.2s ease;
		cursor: pointer;
		position: relative;
	}

	.btn-acao-ftx i {
		color: #fff !important;
		transition: transform 0.2s ease;
	}

	.btn-acao-ftx:hover i {
		transform: scale(1.15);
	}

	/* Editar - Azul */
	.btn-acao-ftx.btn-azul {
		background-color: #325d88 !important;
		box-shadow: 0 0 8px rgba(50, 93, 136, 0.5), 0 2px 4px rgba(50, 93, 136, 0.3);
	}

	.btn-acao-ftx.btn-azul:hover {
		background-color: #2a4d73 !important;
		box-shadow: 0 0 20px rgba(50, 93, 136, 0.8), 0 6px 12px rgba(50, 93, 136, 0.5);
		transform: translateY(-2px);
	}

	/* Excluir - Vinho */
	.btn-acao-ftx.btn-vinho {
		background-color: #722F37 !important;
		box-shadow: 0 0 8px rgba(114, 47, 55, 0.5), 0 2px 4px rgba(114, 47, 55, 0.3);
	}

	.btn-acao-ftx.btn-vinho:hover {
		background-color: #5a252c !important;
		box-shadow: 0 0 20px rgba(114, 47, 55, 0.8), 0 6px 12px rgba(114, 47, 55, 0.5);
		transform: translateY(-2px);
	}

	/* ===== DATATABLE HEADER - PADRÃO FROTIX (20% mais claro que ftx-card-header) ===== */
	#tblRequisitante thead th,
	.table thead th {
		background-color: #4a6fa5 !important;
		color: #fff !important;
		font-weight: 600;
		border-color: #3d5d8a !important;
		text-transform: uppercase;
		font-size: 0.85rem;
		letter-spacing: 0.5px;
	}

	#tblRequisitante thead th:hover,
	.table thead th:hover {
		background-color: #5a7fb5 !important;
	}

	/* Ícones de ordenação do DataTable */
	table.dataTable thead .sorting:before,
	table.dataTable thead .sorting:after,
	table.dataTable thead .sorting_asc:before,
	table.dataTable thead .sorting_asc:after,
	table.dataTable thead .sorting_desc:before,
	table.dataTable thead .sorting_desc:after {
		color: rgba(255, 255, 255, 0.7) !important;
	}

	table.dataTable thead .sorting_asc:before,
	table.dataTable thead .sorting_desc:after {
		color: #fff !important;
	}
</style>

<div class="row">
	<div class="col-xl-12">
		<div class="panel">
			<div class="panel-container show">

				<!-- HEADER DO CARD - PADRÃO FROTIX -->
				<div class="ftx-card-header">
					<h2 class="titulo-paginas">
						<i class="fa-duotone fa-user-tie"></i>
						Gestão de Requisitantes
					</h2>
					<div class="ftx-card-actions">
						<a href="/Requisitante/Upsert" class="btn btn-fundo-laranja" data-ftx-loading>
							<i class="fa-duotone fa-clone-plus icon-pulse me-1"></i>
							Adicionar Requisitante
						</a>
					</div>
				</div>

				<!-- CONTEÚDO -->
				<div class="panel-content">
					<div class="box-body">

						<!-- DATATABLE -->
						<div id="divRequisitantes">
							<table id="tblRequisitante" class="table table-bordered table-striped" width="100%">
								<thead>
									<tr>
										<th>Ponto</th>
										<th>Nome</th>
										<th>Ramal</th>
										<th>Setor</th>
										<th>Status</th>
										<th>Ação</th>
									</tr>
								</thead>
								<tbody>
								</tbody>
							</table>
						</div>

					</div>
				</div>
			</div>
		</div>
	</div>
</div>

@section ScriptsBlock {
	<script src="~/js/cadastros/requisitante.js" asp-append-version="true"></script>

	<script>
		// ========== RIPPLE EXTERNO PARA BOTÕES LARANJA ==========
		(function() {
			'use strict';

			function createExternalRipple(event, element) {
				if (element.disabled || element.classList.contains('disabled')) return;

				// Remove ripples anteriores
				element.querySelectorAll('.ftx-ripple-circle').forEach(r => r.remove());

				const rect = element.getBoundingClientRect();
				const x = event.clientX - rect.left;
				const y = event.clientY - rect.top;
				const size = Math.max(rect.width, rect.height) * 1.5; // Efeito externo moderado

				const ripple = document.createElement('span');
				ripple.className = 'ftx-ripple-circle';
				ripple.style.cssText = `
					position: absolute;
					border-radius: 50%;
					pointer-events: none;
					transform: scale(0);
					animation: ftxRippleAnim 900ms ease-out forwards;
					background: radial-gradient(circle, rgba(255,255,255,0.95) 0%, rgba(255,255,255,0.6) 30%, rgba(255,255,255,0.3) 50%, transparent 70%);
					width: ${size}px;
					height: ${size}px;
					left: ${x}px;
					top: ${y}px;
					margin-left: -${size/2}px;
					margin-top: -${size/2}px;
					z-index: 9999;
				`;

				element.appendChild(ripple);
				setTimeout(() => ripple.remove(), 900);
			}

			// Captura cliques nos botões laranja
			document.addEventListener('click', function(e) {
				const btn = e.target.closest('.btn-fundo-laranja, .btn-header-orange');
				if (btn) {
					createExternalRipple(e, btn);
				}
			}, true);
		})();
	</script>

	<style>
		/* Keyframe para animação do ripple */
		@@keyframes ftxRippleAnim {
			0% { transform: scale(0); opacity: 1; }
			100% { transform: scale(1); opacity: 0; }
		}
	</style>
}
