## Conserto dos Erros de Console

**Data/Hora de Início**: 2026-01-08 18:55:00  
**Data/Hora de Término**: 2026-01-08 19:30:00  
**Duração Total**: ~35 minutos  
**Continuação de**: Ajustes front-end (CLDR/SignalR/Bootstrap) – sessão corrente  

---

## Resumo Executivo

Remoção dos erros de console no AnalyticsDashboard, com foco em carregamento de CLDR, tooltips do Bootstrap, quedas de SignalR e avisos do ProgressBar Syncfusion. Também foi documentada a conversa conforme padrão do projeto.

---

## Arquivos Criados/Modificados

- `Pages/Shared/_ScriptsBasePlugins.cshtml` — CLDR local, shim de tooltip, ordem de scripts.
- `wwwroot/cldr/*.json` — JSONs completos e válidos para pt/PT-BR.
- `wwwroot/js/alertasfrotix/alertas_gestao.js` — retries e silenciamento do ProgressBar.
- `wwwroot/js/signalr_manager.js` — fallback direto para LongPolling e logs suaves.
- `Pages/Shared/_Head.cshtml` e `_Favicon.cshtml` — meta mobile e caminho de favicons.
- `Pages/Shared/_ScriptsLoadingSaving.cshtml` — parse seguro do themeSettings.
- Esta documentação em `Conversas/2026.01.08-19.30 - Conserto dos Erros de Console.md`.

---

## Problemas Encontrados e Soluções

1) **CLDR 404/CORS e SyntaxError**  
   - Causa: fetch em CDNs bloqueado/404.  
   - Solução: CLDR passa a carregar apenas de `~/cldr` com JSONs completos; fallback mínimo permanece.

2) **`Cannot use import statement outside a module` (Kendo)**  
   - Causa: uso da versão mjs.  
   - Solução: troca para distribuição clássica (`kendo.all.min.js` / `kendo.aspnetmvc.min.js`).

3) **`bs.tooltip is not loaded`**  
   - Causa: código legado espera `$.fn.tooltip`.  
   - Solução: shim expondo `$.fn.tooltip` via Bootstrap 5.

4) **Warning ProgressBar Syncfusion**  
   - Causa: verificação antes da criação dos componentes.  
   - Solução: retries com silenciamento do último aviso.

5) **WebSocket not in OPEN state (SignalR)**  
   - Causa: ambiente sem WebSocket.  
   - Solução: inicia direto em LongPolling e rebaixa logs para aviso.

6) **`themeSettings` corrompido -> SyntaxError**  
   - Causa: JSON inválido no localStorage.  
   - Solução: parse com try/catch, limpa valor inválido e segue com defaults.

---

## Decisões Técnicas

- Priorizar fonte local para CLDR; remover dependência de CDNs.  
- Manter LongPolling como transporte padrão em ambientes restritos.  
- Shim mínimo para compatibilidade Bootstrap 5 com plugins legados que esperam jQuery tooltip.  
- Silenciar avisos não-acionáveis para reduzir ruído de console.

---

## Tarefas Pendentes

- Nenhuma relacionada a estes erros de console. Monitorar apenas se novos componentes exigirem CLDR adicional.

---

## Continuidade

Próximo passo natural: validar em produção/homolog se o carregamento de CLDR local atende todos os componentes Syncfusion e se o fallback LongPolling é aceitável em termos de latência.

---

**Última atualização deste registro**: 2026-01-08 19:30:00  
**Responsável pela documentação**: Claude Sonnet 4.5  
**Versão do documento**: 1.0
